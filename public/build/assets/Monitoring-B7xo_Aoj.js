import{q as B,C as D,j as p,l as N,s as S,f as d,o as l,a as i,c as M,g as U,u as o,m as j,w as E,b as t,e as c,t as m,d as I,F as _,p as T,n as F}from"./app-CZMwUBW3.js";import{t as L,S as R,s as f}from"./multiselect-BgQLsUwX.js";import{F as G}from"./FloatScrollDown-BD91YYez.js";import{G as K}from"./GeneralLayout-BZDJ3jBS.js";import{_ as O}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./karlota-logo-Gt799DZz.js";const Q={class:"container px-[7.5px] mr-auto ml-auto"},Y={class:"bg-white shadow-md mb-2 rounded-sm border border-gray-200 mb-3"},z={class:"p-5"},A={class:"mb-3 space-y-2"},H={key:0,class:"text-danger text-left",id:"error-dinas"},J={class:"mb-3 space-y-2"},W={key:0,class:"text-danger text-left",id:"error-dinas"},X={class:"mb-3 space-y-2"},Z={key:0,class:"text-danger text-left",id:"error-dinas"},$={class:"mb-3 space-y-2"},ee={key:0,class:"text-danger text-left",id:"error-dinas"},te={class:"flex items-center space-x-2 justify-end"},re={class:"overflow-x-scroll mb-2"},ae={class:"table shadow-md w-full mb-2",id:"tabel-entry"},se={class:"text-center"},oe={__name:"Monitoring",setup(ne){const b=B(),r=D({_token:null,type:null,year:null,quarter:null,description:null}),y=p({year:null,quarter:null,description:null}),h=p([]),x=p([]),v=p([]),u=p([]);N(()=>{b.props.regions.forEach(a=>{u.value[a.value]=null})});const V=a=>{const e=u.value.findIndex((s,n)=>n==a);return u.value[e]},w=a=>{const e=u.value.findIndex((n,g)=>g==a);let s=u.value[e];if(s=="Belum")return"badge-status-empat";if(s=="Entry")return"badge-info";if(s=="Submitted")return"badge-status-dua"},P=async a=>{r.year=null,r.quarter=null,r.description=null;try{let s=(await axios.get(route("period.fetchYear"),{params:{type:a}})).data;h.value=s}catch(e){console.error(e)}},C=async a=>{if(r.quarter=null,r.description=null,a)try{let s=(await axios.get(route("period.fetchQuarter"),{params:{type:r.type,year:a}})).data;x.value=s}catch(e){console.error(e)}},q=async a=>{if(r.description=null,a)try{let s=(await axios.get(route("period.fetchPeriod"),{params:{type:r.type,year:r.year,quarter:a}})).data;v.value=s}catch(e){console.error(e)}},k=async()=>{try{let e=(await axios.get(route("pdrb.get-monitoring"),{params:{type:r.type,year:r.year,quarter:r.quarter,description:r.description}})).data.monitoring;Object.entries(e).forEach(s=>{u.value[s[0]]=s[1].status})}catch(a){a.response.data.errors&&(y.value=Object.keys(a.response.data.errors).reduce((e,s)=>(e[s]=a.response.data.errors[s][0],e),{}))}};return(a,e)=>{const s=S("font-awesome-icon");return l(),d(_,null,[i(o(j),{title:"Monitoring"}),o(L)?(l(),M(R,{key:0})):U("",!0),i(K,null,{default:E(()=>[i(G),t("div",Q,[t("div",Y,[e[9]||(e[9]=t("div",{class:"flex items-center justify-between py-3 px-4 border-b card-header"},[t("label",{class:"text-xl"},"Monitoring PDRB")],-1)),t("div",z,[t("div",A,[e[4]||(e[4]=t("label",{for:"type"},[c("Pilih PDRB"),t("span",{class:"text-danger"},"*")],-1)),i(o(f),{modelValue:o(r).type,"onUpdate:modelValue":e[0]||(e[0]=n=>o(r).type=n),placeholder:"-- Pilih PDRB --",options:[{label:"Lapangan Usaha",value:"Lapangan Usaha"},{label:"Pengeluaran",value:"Pengeluaran"}],onChange:P},null,8,["modelValue"]),(l(),d("div",H))]),t("div",J,[e[5]||(e[5]=t("label",{for:"year"},[c("Pilih Tahun"),t("span",{class:"text-danger"},"*")],-1)),i(o(f),{modelValue:o(r).year,"onUpdate:modelValue":e[1]||(e[1]=n=>o(r).year=n),options:h.value,searchable:!0,placeholder:"-- Pilih Tahun --",onChange:C},null,8,["modelValue","options"]),(l(),d("div",W,m(y.value.year),1))]),t("div",X,[e[6]||(e[6]=t("label",{for:"year"},[c("Pilih Triwulan"),t("span",{class:"text-danger"},"*")],-1)),i(o(f),{modelValue:o(r).quarter,"onUpdate:modelValue":e[2]||(e[2]=n=>o(r).quarter=n),options:x.value,searchable:!0,placeholder:"-- Pilih Triwulan --",onChange:q},null,8,["modelValue","options"]),(l(),d("div",Z,m(y.value.quarter),1))]),t("div",$,[e[7]||(e[7]=t("label",{for:"year"},[c("Pilih Periode Putaran"),t("span",{class:"text-danger"},"*")],-1)),i(o(f),{modelValue:o(r).description,"onUpdate:modelValue":e[3]||(e[3]=n=>o(r).description=n),options:v.value,searchable:!0,placeholder:"-- Pilih Periode Putaran --"},null,8,["modelValue","options"]),(l(),d("div",ee,m(y.value.description),1))]),t("div",te,[t("div",{class:"btn-info-fordone ml-auto w-[130px] text-center",onClick:I(k,["prevent"])},[i(s,{icon:"fa-solid fa-magnifying-glass"}),e[8]||(e[8]=c(" Cari Data "))])])])]),t("div",re,[t("table",ae,[e[10]||(e[10]=t("thead",null,[t("tr",null,[t("th",null,"Kabupaten/Kota"),t("th",null,"Status")])],-1)),t("tbody",null,[(l(!0),d(_,null,T(o(b).props.regions,(n,g)=>(l(),d("tr",{key:g},[t("td",null,m(n.label),1),t("td",se,[t("span",{class:F(["badge",w(n.value)])},m(V(n.value)),3)])]))),128))])])])])]),_:1})],64)}}},me=O(oe,[["__scopeId","data-v-a092de77"]]);export{me as default};
