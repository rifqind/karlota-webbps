import{j as V,k as Q,l as da,f as D,o as N,F as Z,p as ua,b as c,t as aa,n as M,g as E,u as q,q as ma,C as pa,s as va,a as I,c as ja,m as _a,w as Na,e as ea,d as ha,v as na,x as la}from"./app-CZMwUBW3.js";import{t as ka,S as Da,s as ra}from"./multiselect-BgQLsUwX.js";import{d as qa}from"./debounce-CD1Fzea3.js";import{_ as oa}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{F as Va}from"./FlashFetch-Dkr2vR2D.js";import{F as ya}from"./FloatScrollDown-BD91YYez.js";import{G as xa}from"./GeneralLayout-BZDJ3jBS.js";import"./karlota-logo-Gt799DZz.js";const wa={ref:"tableRef"},Ka={key:0},ga=["disabled","id","value","onInput"],Ta={__name:"AdjustmentTable",props:{regions:{type:Array,required:!0},dataContents:{type:Object,required:!0},quarterCap:{type:String,required:!0},dataAdjustment:{type:Object,required:!0},dataOnDemand:{type:Object,required:!0},dataBefore:{type:Object,required:!0},typeData:{type:String,required:!0}},emits:["update:updateDataOnDemand","update:updateDataContents","update:setAdjustmentDefault"],setup(z,{emit:O}){const s=z,Y=O,v=V(s.dataAdjustment),B=V(s.dataContents),x=V(s.dataBefore),T=V([]);Q(()=>s.dataContents,t=>{B.value=t}),Q(()=>s.dataBefore,t=>{x.value=t}),Q(()=>s.dataAdjustment,t=>{v.value=t},{deep:!0}),Q(v,t=>{Y("update:updateDataOnDemand",{data:t,quarter:s.quarterCap})},{deep:!0}),Q(T,t=>{Y("update:setAdjustmentDefault",t)});const U=()=>s.typeData!="subsector",P=t=>({region:t,adjVal:{adhb_initial:null,adhb_adjust:null,adhb_berjalan:null,adhk_initial:null,adhk_adjust:null,adhk_berjalan:null,qtoq_initial:null,qtoq_berjalan:null,yony_initial:null,yony_berjalan:null,ctoc_initial:null,ctoc_berjalan:null,lajuimpqtoq_initial:null,lajuimpqtoq_berjalan:null,sogyony_initial:null,sogyony_berjalan:null,kontribusi_initial:null,kontribusi_berjalan:null}});da(()=>{T.value=[],s.regions.forEach((t,e)=>{e==0?T.value=[P(t.value),P("Total Kabupaten/Kota"),P("Selisih"),P("Diskrepansi")]:T.value.push(P(t.value))}),v.value=T.value});const R=t=>{let e=Number(t);return isNaN(e)?t:s.regions.find(l=>l.value==e).label},W=(t,e)=>{const u=B.value.find(l=>l.region_id==t&&l.quarter==s.quarterCap);if(e=="adhb_initial"){if(t=="Total Kabupaten/Kota")return A("adhb",t,e);if(t=="Selisih")return H(e);if(t=="Diskrepansi")return S(e);if(u){let l;return l=u.adhb==""||u.adhb==null?null:u.adhb,r(t,e,Number(l)),n(Number(l),0,9)}}else if(e=="adhk_initial"){if(t=="Total Kabupaten/Kota")return A("adhk",t,e);if(t=="Selisih")return H(e);if(t=="Diskrepansi")return S(e);if(u){let l;return l=u.adhk==""||u.adhk==null?null:u.adhk,r(t,e,Number(l)),n(Number(l),0,9)}}else if(e=="adhb_berjalan"||e=="adhk_berjalan"){if(!isNaN(Number(t)))return K(t,e);if(t=="Total Kabupaten/Kota")return F(e);if(t=="Selisih")return H(e);if(t=="Diskrepansi")return S(e)}else if(e=="qtoq_initial"){if(!isNaN(Number(t))||t=="Total Kabupaten/Kota")return m(t,"adhk_initial",e)}else if(e=="qtoq_berjalan"){if(!isNaN(Number(t))||t=="Total Kabupaten/Kota")return m(t,"adhk_berjalan",e)}else if(e=="yony_initial"){if(!isNaN(Number(t))||t=="Total Kabupaten/Kota")return b(t,"adhk_initial",e)}else if(e=="yony_berjalan"){if(!isNaN(Number(t))||t=="Total Kabupaten/Kota")return b(t,"adhk_berjalan",e)}else if(e=="ctoc_initial"){if(!isNaN(Number(t))||t=="Total Kabupaten/Kota")return j(t,"adhk_initial",e)}else if(e=="ctoc_berjalan"){if(!isNaN(Number(t))||t=="Total Kabupaten/Kota")return j(t,"adhk_berjalan",e)}else if(e=="lajuimpqtoq_initial"){if(!isNaN(Number(t))||t=="Total Kabupaten/Kota")return _(t,"adhb_initial","adhk_initial",e)}else if(e=="lajuimpqtoq_berjalan"){if(!isNaN(Number(t))||t=="Total Kabupaten/Kota")return _(t,"adhb_berjalan","adhk_berjalan",e)}else if(e=="kontribusi_initial"){if(!isNaN(Number(t))||t=="Total Kabupaten/Kota")return k("adhb_initial",t,e)}else if(e=="kontribusi_berjalan"&&(!isNaN(Number(t))||t=="Total Kabupaten/Kota"))return k("adhb_berjalan",t,e)},A=(t,e,u)=>{const o=B.value.filter(h=>h.quarter==s.quarterCap&&h.region_id!==1).reduce((h,d)=>h+Number(d[t]),0),p=v.value.findIndex(h=>h.region==e);return p!==-1&&(v.value[p].adjVal[u]=o),n(o,0,9)},F=t=>{const u=v.value.filter(l=>l.region!==1&&!isNaN(Number(l.region))).reduce((l,o)=>l+Number(o.adjVal[t]),0);return r("Total Kabupaten/Kota",t,u),n(u,0,9)},H=t=>{const e=v.value.find(o=>o.region==1),u=v.value.find(o=>o.region=="Total Kabupaten/Kota");let l=e.adjVal[t]-u.adjVal[t];return n(l,0,9)},S=t=>{const e=v.value.find(o=>o.region==1),u=String(H(t)).replaceAll(".","").replaceAll(",",".");let l=Number(u)/e.adjVal[t]*100;return n(l,2,4)},K=(t,e)=>{const u=v.value.find(l=>l.region==t);if(e=="adhb_berjalan"){const l=u.adjVal.adhb_initial+u.adjVal.adhb_adjust;return r(t,e,l),n(l,0,9)}else if(e=="adhk_berjalan"){const l=u.adjVal.adhk_initial+u.adjVal.adhk_adjust;return r(t,e,l),n(l,0,9)}},$=(t,e)=>{const u=v.value.find(l=>l.region==e);if(u){let l;return l=u.adjVal[t]==""||u.adjVal[t]==null?null:n(Number(u.adjVal[t]),0,9),l}},L=(t,e,u,l)=>{let o=t.target.value;o=String(o).replaceAll(".","").replace(",",".");const p=v.value.findIndex(a=>a.region==u),h=B.value.findIndex(a=>a.region_id==u&&a.quarter==l);p!==-1&&(v.value[p].adjVal[e]=Number(o));let d;e=="adhb_adjust"?d="adj_adhb":e=="adhk_adjust"&&(d="adj_adhk"),h!==-1&&(B.value[h][d]=Number(o))},g=qa((t,e,u,l)=>{L(t,e,u,l)},700),r=(t,e,u)=>{const l=v.value.findIndex(o=>o.region==t);l!==-1&&(v.value[l].adjVal[e]=u)};Q(B.value,t=>{Y("update:updateDataContents",t)});const n=(t,e=2,u=5)=>new Intl.NumberFormat("de-DE",{minimumFractionDigits:e,maximumFractionDigits:u}).format(t),m=(t,e,u)=>{var f,i;let l=Number(s.quarterCap),o=null,p=null,h=0,d=0;s.dataOnDemand[l]&&Array.isArray(s.dataOnDemand[l])&&(o=s.dataOnDemand[l].find(y=>y.region==t)??null),h=Number((f=o==null?void 0:o.adjVal)==null?void 0:f[e])??0,l-1!==0?(s.dataOnDemand[l-1]&&Array.isArray(s.dataOnDemand[l-1])&&(p=s.dataOnDemand[l-1].find(y=>y.region==t)??null),d=Number((i=p==null?void 0:p.adjVal)==null?void 0:i[e])??0):isNaN(Number(t))?d=x.value.filter(C=>C.quarter=="4"&&C.region_id!==1).reduce((C,J)=>C+(Number(J==null?void 0:J.adhk)??0),0):(p=x.value.find(y=>y.quarter=="4"&&y.region_id==t)??null,d=Number(p==null?void 0:p.adhk)??0);let a=d!==0&&h!==0?h/d*100-100:0;return r(t,u,a),n(a.toFixed(4),2,4)},b=(t,e,u)=>{var f;let l=Number(s.quarterCap),o=null,p=null,h=0,d=0;s.dataOnDemand[l]&&Array.isArray(s.dataOnDemand[l])&&(o=s.dataOnDemand[l].find(i=>i.region==t)??null),h=Number((f=o==null?void 0:o.adjVal)==null?void 0:f[e])??0,isNaN(Number(t))?d=x.value.filter(y=>y.quarter==s.quarterCap&&y.region_id!==1).reduce((y,C)=>y+(Number(C==null?void 0:C.adhk)??0),0):(p=x.value.find(i=>i.quarter==s.quarterCap&&i.region_id==t)??null,d=Number(p==null?void 0:p.adhk)??0);let a=d!==0&&h!==0?h/d*100-100:0;return r(t,u,a),n(a.toFixed(4),2,4)},j=(t,e,u)=>{var f;let l=Number(s.quarterCap),o=null,p=null,h=0,d=0;for(let i=1;i<=l;i++)if(s.dataOnDemand[i]&&Array.isArray(s.dataOnDemand[i])&&(o=s.dataOnDemand[i].find(y=>y.region==t)??null),h+=Number((f=o==null?void 0:o.adjVal)==null?void 0:f[e])??0,!isNaN(Number(t)))p=x.value.find(y=>y.quarter==String(i)&&y.region_id==t)??null,d+=Number(p==null?void 0:p.adhk)??0;else{const y=x.value.filter(C=>C.quarter==String(i)&&C.region_id!==1);d+=y.reduce((C,J)=>C+(Number(J==null?void 0:J.adhk)??0),0)}let a=d!==0&&h!==0?h/d*100-100:0;return r(t,u,a),n(a.toFixed(4),2,4)},_=(t,e,u,l)=>{var ia,ca,fa,ba;let o=Number(s.quarterCap),p=null,h=null,d=null,a=null,f=null,i=null,y=0,C=0;if(s.dataOnDemand[o]&&Array.isArray(s.dataOnDemand[o])&&(p=s.dataOnDemand[o].find(G=>G.region==t)??null),d=Number((ia=p==null?void 0:p.adjVal)==null?void 0:ia[e])??0,a=Number((ca=p==null?void 0:p.adjVal)==null?void 0:ca[u])??0,y=d!==0&&a!==0?d/a*100:0,o-1!==0)s.dataOnDemand[o-1]&&Array.isArray(s.dataOnDemand[o-1])&&(h=s.dataOnDemand[o-1].find(G=>G.region==t)??null),f=Number((fa=h==null?void 0:h.adjVal)==null?void 0:fa[e])??0,i=Number((ba=h==null?void 0:h.adjVal)==null?void 0:ba[u])??0,C=f!==0&&i!==0?f/i*100:0;else{if(!isNaN(Number(t)))h=x.value.find(G=>G.quarter=="4"&&G.region_id==t)??null,f=Number(h==null?void 0:h.adhb)??0,i=Number(h==null?void 0:h.adhk)??0;else{const G=x.value.filter(ta=>ta.quarter=="4"&&ta.region_id!==1);f=G.reduce((ta,X)=>ta+(Number(X==null?void 0:X.adhb)??0),0),i=G.reduce((ta,X)=>ta+(Number(X==null?void 0:X.adhk)??0),0)}C=f!==0&&i!==0?f/i*100:0}let J=C!==0&&y!==0?y/C*100-100:0;return r(t,l,J),n(J.toFixed(4),2,4)},k=(t,e,u)=>{if(e==1)return;const l=v.value.find(h=>h.region=="Total Kabupaten/Kota");let p=v.value.find(h=>h.region==e).adjVal[t]/l.adjVal[t]*100;return r(e,u,p),n(p,2,4)},w=(t,e)=>{if(t=="Diskrepansi"){const u=v.value.find(p=>p.region==1),l=String(H(e)).replaceAll(".","").replaceAll(",",".");let o=Number(l)/u.adjVal[e]*100;if(o>5)return"text-red-500";if(o>2)return"text-yellow-500";if(o)return"text-black"}else{const u=v.value.find(h=>h.region==1),l=v.value.find(h=>h.region==t);let o=u.adjVal[e],p=l.adjVal[e];return t==1?"font-bold":o>0&&p<0||o<0&&p>0?"text-red-500 font-bold":"text-black"}};return(t,e)=>(N(),D("tbody",wa,[(N(!0),D(Z,null,ua(v.value,(u,l)=>(N(),D("tr",null,[c("td",{class:M([l<4?"font-bold":"","fixed-column"])},aa(R(u.region)),3),(N(!0),D(Z,null,ua(Object.keys(u.adjVal),(o,p)=>(N(),D(Z,{key:p},[o=="adhb_adjust"||o=="adhk_adjust"?(N(),D("td",Ka,[l>=4?(N(),D("input",{type:"text",disabled:U(),id:o+u.region+z.quarterCap,key:o+u.region+z.quarterCap,value:$(o,u.region),onInput:h=>{q(g)(h,o,u.region,z.quarterCap)},class:"input-fordone w-full"},null,40,ga)):E("",!0)])):(N(),D("td",{key:1,class:M(w(u.region,o))},aa(W(u.region,o)),3))],64))),128))]))),256))],512))}},sa=oa(Ta,[["__scopeId","data-v-a06a4522"]]),Ca={ref:"tableRef"},Oa={key:0},Aa={key:1},Sa={__name:"AdjustmentTahunTable",props:{regions:{type:Array,required:!0},dataContents:{type:Object,required:!0},dataAdjustment:{type:Object,required:!0},dataOnDemand:{type:Object,required:!0},dataBefore:{type:Object,required:!0}},emits:["update:updateDataOnDemand"],setup(z,{emit:O}){const s=z,Y=O,v=V(s.dataAdjustment),B=V(s.dataContents),x=V(s.dataBefore);Q(()=>s.dataContents,r=>{B.value=r}),Q(()=>s.dataBefore,r=>{x.value=r}),Q(()=>s.dataAdjustment,r=>{v.value=r},{deep:!0}),Q(v,r=>{Y("update:updateDataOnDemand",{data:r,quarter:"t"})},{deep:!0});const T=r=>({region:r,adjVal:{adhb_initial:null,adhb_adjust:null,adhb_berjalan:null,adhk_initial:null,adhk_adjust:null,adhk_berjalan:null,qtoq_initial:null,qtoq_berjalan:null,yony_initial:null,yony_berjalan:null,ctoc_initial:null,ctoc_berjalan:null,lajuimpqtoq_initial:null,lajuimpqtoq_berjalan:null,sogyony_initial:null,sogyony_berjalan:null,kontribusi_initial:null,kontribusi_berjalan:null}});da(()=>{let r=[];s.regions.forEach((n,m)=>{m==0?r=[T(n.value),T("Total Kabupaten/Kota"),T("Selisih"),T("Diskrepansi")]:r.push(T(n.value))}),v.value=r});const U=r=>{let n=Number(r);return isNaN(n)?r:s.regions.find(b=>b.value==n).label},P=(r,n)=>{const m=B.value.filter(b=>b.region_id==r);if(n=="adhb_initial"){if(r=="Total Kabupaten/Kota")return R("adhb",r,n);if(r=="Selisih")return A(n);if(r=="Diskrepansi")return F(n);if(m){let b;return b=m.reduce((j,_)=>j+Number(_==null?void 0:_.adhb),0),S(r,n,b),K(b,0,9)}}else if(n=="adhk_initial"){if(r=="Total Kabupaten/Kota")return R("adhk",r,n);if(r=="Selisih")return A(n);if(r=="Diskrepansi")return F(n);if(m){let b;return b=m.reduce((j,_)=>j+Number(_==null?void 0:_.adhk),0),S(r,n,b),K(b,0,9)}}else if(n=="adhb_berjalan"||n=="adhk_berjalan"){if(!isNaN(Number(r)))return H(r,n);if(r=="Total Kabupaten/Kota")return W(n);if(r=="Selisih")return A(n);if(r=="Diskrepansi")return F(n)}else if(n=="yony_initial"){if(!isNaN(Number(r))||r=="Total Kabupaten/Kota")return $(r,"adhk_initial",n)}else if(n=="yony_berjalan"){if(!isNaN(Number(r))||r=="Total Kabupaten/Kota")return $(r,"adhk_berjalan",n)}else if(n=="ctoc_initial"){if(!isNaN(Number(r))||r=="Total Kabupaten/Kota")return L(r,"adhk_initial",n)}else if(n=="ctoc_berjalan"){if(!isNaN(Number(r))||r=="Total Kabupaten/Kota")return L(r,"adhk_berjalan",n)}else if(n=="kontribusi_initial"){if(!isNaN(Number(r))||r=="Total Kabupaten/Kota")return g("adhb_initial",r,n)}else if(n=="kontribusi_berjalan"&&(!isNaN(Number(r))||r=="Total Kabupaten/Kota"))return g("adhb_berjalan",r,n)},R=(r,n,m)=>{const j=B.value.filter(k=>k.region_id!==1).reduce((k,w)=>k+Number(w[r]),0),_=v.value.findIndex(k=>k.region==n);return _!==-1&&(v.value[_].adjVal[m]=j),K(j,0,9)},W=r=>{const m=v.value.filter(b=>b.region!==1&&!isNaN(Number(b.region))).reduce((b,j)=>b+Number(j.adjVal[r]),0);return S("Total Kabupaten/Kota",r,m),K(m,0,9)},A=r=>{const n=v.value.find(j=>j.region==1),m=v.value.find(j=>j.region=="Total Kabupaten/Kota");let b=n.adjVal[r]-m.adjVal[r];return K(b,0,9)},F=r=>{const n=v.value.find(j=>j.region==1),m=String(A(r)).replaceAll(".","").replaceAll(",",".");let b=Number(m)/n.adjVal[r]*100;return K(b,2,4)},H=(r,n)=>{var j,_;let m=0,b=0;for(let k=1;k<=4;k++){const w=s.dataOnDemand[k].find(t=>t.region==r);n==="adhb_berjalan"?m+=Number((j=w==null?void 0:w.adjVal)==null?void 0:j[n])||0:n==="adhk_berjalan"&&(b+=Number((_=w==null?void 0:w.adjVal)==null?void 0:_[n])||0)}if(n=="adhb_berjalan")return S(r,n,m),K(m,0,9);if(n=="adhk_berjalan")return S(r,n,b),K(b,0,9)},S=(r,n,m)=>{const b=v.value.findIndex(j=>j.region==r);b!==-1&&(v.value[b].adjVal[n]=m)},K=(r,n=2,m=5)=>new Intl.NumberFormat("de-DE",{minimumFractionDigits:n,maximumFractionDigits:m}).format(r),$=(r,n,m)=>{var t;let b=null,j=null,_=0,k=0;for(let e=1;e<=4;e++)if(s.dataOnDemand[e]&&Array.isArray(s.dataOnDemand[e])&&(b=s.dataOnDemand[e].find(u=>u.region==r)??null),_+=Number((t=b==null?void 0:b.adjVal)==null?void 0:t[n])??0,!isNaN(Number(r)))j=x.value.find(u=>u.quarter==String(e)&&u.region_id==r)??null,k+=Number(j==null?void 0:j.adhk)??0;else{const u=x.value.filter(l=>l.quarter==String(e)&&l.region_id!==1);k+=u.reduce((l,o)=>l+(Number(o==null?void 0:o.adhk)??0),0)}let w=k!==0&&_!==0?_/k*100-100:0;return S(r,m,w),K(w.toFixed(4),2,4)},L=(r,n,m)=>{var e;let b=Number(s.quarterCap),j=null,_=null,k=0,w=0;for(let u=1;u<=b;u++)if(s.dataOnDemand[u]&&Array.isArray(s.dataOnDemand[u])&&(j=s.dataOnDemand[u].find(l=>l.region==r)??null),k+=Number((e=j==null?void 0:j.adjVal)==null?void 0:e[n])??0,!isNaN(Number(r)))_=x.value.find(l=>l.quarter==String(u)&&l.region_id==r)??null,w+=Number(_==null?void 0:_.adhk)??0;else{const l=x.value.filter(o=>o.quarter==String(u)&&o.region_id!==1);w+=l.reduce((o,p)=>o+(Number(p==null?void 0:p.adhk)??0),0)}let t=w!==0&&k!==0?k/w*100-100:0;return S(r,m,t),K(t.toFixed(4),2,4)},g=(r,n,m)=>{if(n==1)return;const b=v.value.find(k=>k.region=="Total Kabupaten/Kota");let _=v.value.find(k=>k.region==n).adjVal[r]/b.adjVal[r]*100;return S(n,m,_),K(_,2,4)};return(r,n)=>(N(),D("tbody",Ca,[(N(!0),D(Z,null,ua(v.value,(m,b)=>(N(),D("tr",null,[c("td",{class:M([b<4?"font-bold":"","fixed-column"])},aa(U(m.region)),3),(N(!0),D(Z,null,ua(Object.keys(m.adjVal),(j,_)=>(N(),D(Z,{key:_},[j=="adhb_adjust"||j=="adhk_adjust"?(N(),D("td",Oa,[b>=4?(N(),D("input",{type:"text",key:j+m.region+"t",disabled:"",class:"input-fordone w-full"})):E("",!0)])):(N(),D("td",Aa,aa(P(m.region,j)),1))],64))),128))]))),256))],512))}},Ia=oa(Sa,[["__scopeId","data-v-37a4e529"]]),Ba={class:"container px-[7.5px] mr-auto ml-auto"},Pa={class:"bg-white shadow-md mb-2 rounded-sm border border-gray-200 mb-3"},Ua={class:"p-5"},Fa={class:"mb-3 space-y-2"},$a={key:0,class:"text-danger text-left",id:"error-dinas"},Ea={class:"mb-3 space-y-2"},Ya={key:0,class:"text-danger text-left",id:"error-dinas"},La={class:"mb-3 space-y-2"},Ja={key:0,class:"text-danger text-left",id:"error-dinas"},Qa={class:"mb-3 space-y-2"},Ha={key:0,class:"text-danger text-left",id:"error-dinas"},Ga={class:"mb-3 space-y-2"},Ra={key:0,class:"text-danger text-left",id:"error-dinas"},Ma={class:"mb-3 space-y-2"},za={class:"flex items-center space-x-2 justify-end"},Wa={key:0,class:"text-center mt-3"},Xa={key:0,class:"bg-white shadow-md mb-2 rounded-sm border border-gray-200 mb-3"},Za={class:"p-5"},at={class:"flex flex-wrap gap-2"},tt={class:"overflow-x-scroll mb-2"},et={class:"table shadow-md w-full mb-2",id:"tabel-entry"},rt={key:1,class:"bg-white shadow-md mb-2 rounded-sm border border-gray-200 mb-3"},nt={class:"p-5"},lt={class:"flex justify-end space-x-2"},st={__name:"Adjustment",setup(z){const O=ma(),s=pa({_token:null,type:O.props.type,year:null,quarter:null,description:null,dataBefore:null,subsectors:null}),Y=V({year:null,quarter:null,description:null,subsectors:null});var v="btn-info-fordone";const B=V({q1:v,q2:v,q3:v,q4:v,t:v}),x=d=>B.value[d],T=d=>{Object.keys(U.value).forEach(a=>{U.value[a]=!1}),Object.keys(B.value).forEach(a=>{B.value[a]=v}),B.value[d]="btn-success-fordone",U.value[d.replaceAll("q","")]=!0},U=V({1:!1,2:!1,3:!1,4:!1,t:!1}),P=V({1:!1,2:!1,3:!1,4:!1,t:!1}),R=V(!1),W=V("4"),A=V([]),F=V([]),H=V(!1),S=V([]),K=V([]),$=V("subsector"),L=(d,a=200)=>{S.value=d,S.value.forEach((f,i)=>{setTimeout(()=>{S.value.shift()},(i+.5)*a)})},g=V({1:{},2:{},3:{},4:{},t:{}}),r=d=>{g.value[d.quarter]=d.data},n=d=>{A.value=d},m=d=>{K.value=d},b=V([]),j=V([]),_=V([]),k=V([]),w=V([]),t=V(!1);da(()=>{e();let d=[];t.value=!0,O.props.subsectors.forEach(a=>{let f,i;(a.code!=null&&a.code=="a"&&a.sector.code=="1"&&a.sector.category.type=="Lapangan Usaha"||a.code==null&&a.sector.code=="1"&&a.sector.category.type=="Lapangan Usaha")&&(i=a.sector.category.code+". "+a.sector.category.name,f="category-"+a.sector.category.id+"-"+a.sector.id+"-"+a.id,d.push({value:f,label:i})),a.code!=null&&a.code=="a"&&a.sector.category.type=="Lapangan Usaha"&&(i=a.sector.code+". "+a.sector.name,f="sector-"+a.sector.category.id+"-"+a.sector.id+"-"+a.id,d.push({value:f,label:i})),a.code!=null&&a.sector.category.type=="Lapangan Usaha"?(i=a.code+". "+a.name,f="subsector-"+a.sector.category.id+"-"+a.sector.id+"-"+a.id,d.push({value:f,label:i})):a.code==null&&a.sector.code!=null&&a.sector.category.type=="Lapangan Usaha"?(f="subsector-"+a.sector.category.id+"-"+a.sector.id+"-"+a.id,i=a.sector.code+". "+a.sector.name,d.push({value:f,label:i})):a.code==null&&a.sector.code==null&&a.sector.category.type=="Lapangan Usaha"&&(f="subsector-"+a.sector.category.id+"-"+a.sector.id+"-"+a.id,i=a.sector.category.code+". "+a.name,d.push({value:f,label:i})),a.code!=null&&a.code=="a"&&a.sector.category.type=="Pengeluaran"&&(i=a.sector.code+". "+a.sector.name,f="sector-"+a.sector.category.id+"-"+a.sector.id+"-"+a.id,d.push({value:f,label:i})),a.code!=null&&a.sector.category.type=="Pengeluaran"?(i=a.code+". "+a.name,f="subsector-"+a.sector.category.id+"-"+a.sector.id+"-"+a.id,d.push({value:f,label:i})):a.code==null&&a.sector.code!=null&&a.sector.category.type=="Pengeluaran"&&(f="subsector-"+a.sector.category.id+"-"+a.sector.id+"-"+a.id,i=a.sector.code+". "+a.sector.name,d.push({value:f,label:i}))}),d.push({value:"total-pdrb--",label:"Total PDRB"}),w.value=d});const e=async()=>{s.quarter=null,s.description=null;try{let a=(await axios.get(route("period.fetchYear"),{params:{type:O.props.type}})).data;b.value=a}catch(d){console.error(d)}},u=async d=>{if(s.quarter=null,s.description=null,d)try{let f=(await axios.get(route("period.fetchQuarter"),{params:{type:O.props.type,year:d}})).data;j.value=f}catch(a){console.error(a)}},l=async d=>{if(s.description=null,d)try{let f=(await axios.get(route("period.fetchPeriod"),{params:{type:O.props.type,year:s.year,quarter:d}})).data;_.value=f}catch(a){console.error(a)}},o=async d=>{try{let f=(await axios.get(route("period.fetchYearBefore"),{params:{type:O.props.type,year:s.year}})).data;k.value=f}catch(a){console.error(a)}},p=async()=>{A.value=[],g.value={1:JSON.parse(JSON.stringify(K.value)),2:JSON.parse(JSON.stringify(K.value)),3:JSON.parse(JSON.stringify(K.value)),4:JSON.parse(JSON.stringify(K.value)),t:JSON.parse(JSON.stringify(K.value))};try{const d=await axios.get(route("pdrb.get-adjustment"),{params:{type:O.props.type,year:s.year,quarter:s.quarter,description:s.description,dataBefore:s.dataBefore,subsectors:s.subsectors}});for(let a=1;a<=Number(W.value);a++)a==4&&(P.value.t=!0),P.value[a]=!0;$.value=s.subsectors.split("-")[0],W.value=s.quarter,R.value=!0,T(`q${W.value}`),L(d.data.notification),A.value=d.data.current_data,F.value=d.data.previous_data,d.data.current_data.forEach(a=>{const f=g.value[Number(a.quarter)],i=f.findIndex(y=>y.region==a.region_id);i!==-1&&(f[i].adjVal.adhb_adjust=Number(a.adj_adhb),f[i].adjVal.adhk_adjust=Number(a.adj_adhk))})}catch(d){d.response.data.notification&&L(d.response.data.notification,1500),d.response.data.errors&&(Y.value=Object.keys(d.response.data.errors).reduce((a,f)=>(a[f]=d.response.data.errors[f][0],a),{}))}},h=async()=>{const d=pa({_token:null,dataContents:A.value,type:O.props.type}),a=await axios.get(route("token"));d._token=a.data,!d.processing&&d.post(route("pdrb.save-adjustment"),{onSuccess:f=>{console.log(f.props.notification),L(f.props.notification,1500)}})};return(d,a)=>{const f=va("font-awesome-icon");return N(),D(Z,null,[I(q(_a),{title:"Adjustment"}),q(ka)?(N(),ja(Da,{key:0})):E("",!0),I(xa,{entri:t.value},{default:Na(()=>[I(Va,{notifications:S.value},null,8,["notifications"]),I(ya),c("div",Ba,[c("div",Pa,[a[18]||(a[18]=c("div",{class:"flex items-center justify-between py-3 px-4 border-b card-header"},[c("label",{class:"text-xl"},"Entri PDRB")],-1)),c("div",Ua,[c("div",Fa,[a[11]||(a[11]=c("label",{for:"type"},[ea("Pilih PDRB"),c("span",{class:"text-danger"},"*")],-1)),I(q(ra),{modelValue:q(s).type,"onUpdate:modelValue":a[0]||(a[0]=i=>q(s).type=i),placeholder:q(s).type,disabled:""},null,8,["modelValue","placeholder"]),(N(),D("div",$a))]),c("div",Ea,[a[12]||(a[12]=c("label",{for:"year"},[ea("Pilih Tahun"),c("span",{class:"text-danger"},"*")],-1)),I(q(ra),{modelValue:q(s).year,"onUpdate:modelValue":a[1]||(a[1]=i=>q(s).year=i),options:b.value,searchable:!0,placeholder:"-- Pilih Tahun --",onChange:u},null,8,["modelValue","options"]),(N(),D("div",Ya,aa(Y.value.year),1))]),c("div",La,[a[13]||(a[13]=c("label",{for:"year"},[ea("Pilih Triwulan"),c("span",{class:"text-danger"},"*")],-1)),I(q(ra),{modelValue:q(s).quarter,"onUpdate:modelValue":a[2]||(a[2]=i=>q(s).quarter=i),options:j.value,searchable:!0,placeholder:"-- Pilih Triwulan --",onChange:l},null,8,["modelValue","options"]),(N(),D("div",Ja,aa(Y.value.quarter),1))]),c("div",Qa,[a[14]||(a[14]=c("label",{for:"year"},[ea("Pilih Periode Putaran"),c("span",{class:"text-danger"},"*")],-1)),I(q(ra),{modelValue:q(s).description,"onUpdate:modelValue":a[3]||(a[3]=i=>q(s).description=i),options:_.value,searchable:!0,placeholder:"-- Pilih Periode Putaran --",onChange:o},null,8,["modelValue","options"]),(N(),D("div",Ha,aa(Y.value.description),1))]),c("div",Ga,[a[15]||(a[15]=c("label",{for:"year"},"Pilih Data Tahun Sebelumnya",-1)),I(q(ra),{modelValue:q(s).dataBefore,"onUpdate:modelValue":a[4]||(a[4]=i=>q(s).dataBefore=i),options:k.value,searchable:!0,placeholder:"-- Pilih Data Tahun Sebelumnya (opsional, jika tidak dipilih maka akan memilih data tahun paling terbaru/terakhir) --"},null,8,["modelValue","options"]),(N(),D("div",Ra))]),c("div",Ma,[a[16]||(a[16]=c("label",{for:"subsectors"},"Pilih Data:",-1)),I(q(ra),{modelValue:q(s).subsectors,"onUpdate:modelValue":a[5]||(a[5]=i=>q(s).subsectors=i),options:w.value,searchable:!0,placeholder:"-- Pilih Data --"},null,8,["modelValue","options"])]),c("div",za,[c("div",{class:"btn-info-fordone ml-auto w-[130px] text-center",onClick:ha(p,["prevent"])},[I(f,{icon:"fa-solid fa-magnifying-glass"}),a[17]||(a[17]=ea(" Cari Data "))])]),H.value?(N(),D("div",Wa," User melakukan perubahan dataset, dan data belum dicari ")):E("",!0)])]),R.value?(N(),D("div",Xa,[c("div",Za,[c("div",at,[P.value[1]?(N(),D("button",{key:0,onClick:a[6]||(a[6]=i=>T("q1")),class:M(x("q1"))}," Triwulan I ",2)):E("",!0),P.value[2]?(N(),D("button",{key:1,onClick:a[7]||(a[7]=i=>T("q2")),class:M(x("q2"))}," Triwulan II ",2)):E("",!0),P.value[3]?(N(),D("button",{key:2,onClick:a[8]||(a[8]=i=>T("q3")),class:M(x("q3"))}," Triwulan III ",2)):E("",!0),P.value[4]?(N(),D("button",{key:3,onClick:a[9]||(a[9]=i=>T("q4")),class:M(x("q4"))}," Triwulan IV ",2)):E("",!0),P.value.t?(N(),D("button",{key:4,onClick:a[10]||(a[10]=i=>T("t")),class:M(x("t"))}," Tahunan ",2)):E("",!0)])])])):E("",!0),c("div",tt,[c("table",et,[a[19]||(a[19]=c("thead",null,[c("tr",null,[c("th",{class:"fixed-thead",rowspan:"2"},"Wilayah"),c("th",{colspan:"3"},"ADHB"),c("th",{colspan:"3"},"ADHK"),c("th",{colspan:"2"},"Q-to-Q"),c("th",{colspan:"2"},"Y-on-Y"),c("th",{colspan:"2"},"C-to-C"),c("th",{colspan:"2"},"Laju Imp Q-to-Q"),c("th",{colspan:"2"},"SOG Y-on-Y thd Total"),c("th",{colspan:"2"},"Kontribusi thd Total")]),c("tr",null,[c("th",{class:"min-w-[150px]"},"Inisial"),c("th",{class:"min-w-[150px]"},"Adjustment"),c("th",{class:"min-w-[150px]"},"Berjalan"),c("th",{class:"min-w-[150px]"},"Inisial"),c("th",{class:"min-w-[150px]"},"Adjustment"),c("th",{class:"min-w-[150px]"},"Berjalan"),c("th",{class:"min-w-[120px]"},"Inisial"),c("th",{class:"min-w-[120px]"},"Berjalan"),c("th",{class:"min-w-[120px]"},"Inisial"),c("th",{class:"min-w-[120px]"},"Berjalan"),c("th",{class:"min-w-[120px]"},"Inisial"),c("th",{class:"min-w-[120px]"},"Berjalan"),c("th",{class:"min-w-[120px]"},"Inisial"),c("th",{class:"min-w-[120px]"},"Berjalan"),c("th",{class:"min-w-[120px]"},"Inisial"),c("th",{class:"min-w-[120px]"},"Berjalan"),c("th",{class:"min-w-[120px]"},"Inisial"),c("th",{class:"min-w-[120px]"},"Berjalan")])],-1)),na(I(sa,{regions:q(O).props.regions,"data-contents":A.value,"quarter-cap":"1","data-adjustment":g.value[1],"data-on-demand":g.value,"data-before":F.value,"type-data":$.value,"onUpdate:setAdjustmentDefault":m,"onUpdate:updateDataOnDemand":r,"onUpdate:updateDataContents":n},null,8,["regions","data-contents","data-adjustment","data-on-demand","data-before","type-data"]),[[la,U.value[1]]]),na(I(sa,{regions:q(O).props.regions,"data-contents":A.value,"quarter-cap":"2","data-adjustment":g.value[2],"data-on-demand":g.value,"data-before":F.value,"type-data":$.value,"onUpdate:setAdjustmentDefault":m,"onUpdate:updateDataOnDemand":r,"onUpdate:updateDataContents":n},null,8,["regions","data-contents","data-adjustment","data-on-demand","data-before","type-data"]),[[la,U.value[2]]]),na(I(sa,{regions:q(O).props.regions,"data-contents":A.value,"quarter-cap":"3","data-adjustment":g.value[3],"data-on-demand":g.value,"data-before":F.value,"type-data":$.value,"onUpdate:setAdjustmentDefault":m,"onUpdate:updateDataOnDemand":r,"onUpdate:updateDataContents":n},null,8,["regions","data-contents","data-adjustment","data-on-demand","data-before","type-data"]),[[la,U.value[3]]]),na(I(sa,{regions:q(O).props.regions,"data-contents":A.value,"quarter-cap":"4","data-adjustment":g.value[4],"data-on-demand":g.value,"data-before":F.value,"type-data":$.value,"onUpdate:setAdjustmentDefault":m,"onUpdate:updateDataOnDemand":r,"onUpdate:updateDataContents":n},null,8,["regions","data-contents","data-adjustment","data-on-demand","data-before","type-data"]),[[la,U.value[4]]]),na(I(Ia,{regions:q(O).props.regions,"data-contents":A.value,"quarter-cap":"t","data-adjustment":g.value.t,"data-on-demand":g.value,"data-before":F.value,"onUpdate:updateDataOnDemand":r},null,8,["regions","data-contents","data-adjustment","data-on-demand","data-before"]),[[la,U.value.t]])])]),R.value?(N(),D("div",rt,[c("div",nt,[c("div",lt,[c("button",{onClick:ha(h,["prevent"]),class:"btn-info-fordone"},[I(f,{icon:"fa fa-save"}),a[20]||(a[20]=ea(" Simpan Data "))])])])])):E("",!0)])]),_:1},8,["entri"])],64)}}},ht=oa(st,[["__scopeId","data-v-173ccb9e"]]);export{ht as default};
