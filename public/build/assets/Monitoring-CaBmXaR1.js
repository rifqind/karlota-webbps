import{q as S,C as T,j as p,l as F,s as q,f as d,o as i,a as l,c as B,g as N,u as n,m as D,w as M,b as t,e as m,t as f,d as E,F as h,p as j,n as I}from"./app-CZMwUBW3.js";import{t as U,S as L,s as v}from"./multiselect-BgQLsUwX.js";import{F as G}from"./FlashFetch-Dkr2vR2D.js";import{F as K}from"./FloatScrollDown-BD91YYez.js";import{G as O}from"./GeneralLayout-BZDJ3jBS.js";import{_ as R}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./karlota-logo-Gt799DZz.js";const Y={class:"container px-[7.5px] mr-auto ml-auto"},z={class:"bg-white shadow-md mb-2 rounded-sm border border-gray-200 mb-3"},A={class:"p-5"},H={class:"mb-3 space-y-2"},J={key:0,class:"text-danger text-left",id:"error-dinas"},Q={class:"mb-3 space-y-2"},W={key:0,class:"text-danger text-left",id:"error-dinas"},X={class:"mb-3 space-y-2"},Z={key:0,class:"text-danger text-left",id:"error-dinas"},$={class:"flex items-center space-x-2 justify-end"},ee={class:"overflow-x-scroll mb-2"},te={class:"table shadow-md w-full mb-2",id:"tabel-entry"},ae={class:"text-center"},oe={__name:"Monitoring",setup(se){const y=S(),r=T({_token:null,type:null,year:null,quarter:null,description:null}),b=p({year:null,quarter:null,description:null}),c=p([]),x=a=>{c.value=a,c.value.forEach((e,o)=>{setTimeout(()=>{c.value.shift()},(o+1)*1200)})},_=new Date().getFullYear(),w=Array.from({length:11},(a,e)=>_-e),V=p({value:null,options:w.map(a=>({label:a.toString(),value:a.toString()}))}),u=p([]);F(()=>{y.props.regions.forEach(a=>{u.value[a.value]=null})});const C=a=>{const e=u.value.findIndex((o,s)=>s==a);return u.value[e]},k=a=>{const e=u.value.findIndex((s,g)=>g==a);let o=u.value[e];if(o=="Belum")return"badge-status-empat";if(o=="Entry")return"badge-info";if(o=="Submitted")return"badge-status-dua"},P=async()=>{try{const a=await axios.get(route("fenomena.get-monitoring"),{params:{type:r.type,year:r.year,quarter:r.quarter}});let e=a.data.monitoring;Object.entries(e).forEach(o=>{u.value[o[0]]=o[1].status}),x(a.data.notification)}catch(a){a.response.data.errors&&(b.value=Object.keys(a.response.data.errors).reduce((e,o)=>(e[o]=a.response.data.errors[o][0],e),{})),a.response.data.notification&&x(a.response.data.notification)}};return(a,e)=>{const o=q("font-awesome-icon");return i(),d(h,null,[l(n(D),{title:"Monitoring"}),n(U)?(i(),B(L,{key:0})):N("",!0),l(O,null,{default:M(()=>[l(G,{notifications:c.value},null,8,["notifications"]),l(K),t("div",Y,[t("div",z,[e[7]||(e[7]=t("div",{class:"flex items-center justify-between py-3 px-4 border-b card-header"},[t("label",{class:"text-xl"},"Monitoring Fenomena")],-1)),t("div",A,[t("div",H,[e[3]||(e[3]=t("label",{for:"type"},[m("Pilih PDRB"),t("span",{class:"text-danger"},"*")],-1)),l(n(v),{modelValue:n(r).type,"onUpdate:modelValue":e[0]||(e[0]=s=>n(r).type=s),placeholder:"-- Pilih PDRB --",options:[{label:"Lapangan Usaha",value:"Lapangan Usaha"},{label:"Pengeluaran",value:"Pengeluaran"}]},null,8,["modelValue"]),(i(),d("div",J))]),t("div",Q,[e[4]||(e[4]=t("label",{for:"year"},[m("Pilih Tahun"),t("span",{class:"text-danger"},"*")],-1)),l(n(v),{modelValue:n(r).year,"onUpdate:modelValue":e[1]||(e[1]=s=>n(r).year=s),options:V.value.options,searchable:!0,placeholder:"-- Pilih Tahun --"},null,8,["modelValue","options"]),(i(),d("div",W,f(b.value.year),1))]),t("div",X,[e[5]||(e[5]=t("label",{for:"year"},[m("Pilih Triwulan"),t("span",{class:"text-danger"},"*")],-1)),l(n(v),{modelValue:n(r).quarter,"onUpdate:modelValue":e[2]||(e[2]=s=>n(r).quarter=s),options:[{label:"Triwulan 1",value:"1"},{label:"Triwulan 2",value:"2"},{label:"Triwulan 3",value:"3"},{label:"Triwulan 4",value:"4"}],searchable:!0,placeholder:"-- Pilih Triwulan --"},null,8,["modelValue"]),(i(),d("div",Z,f(b.value.quarter),1))]),t("div",$,[t("div",{class:"btn-info-fordone ml-auto w-[130px] text-center",onClick:E(P,["prevent"])},[l(o,{icon:"fa-solid fa-magnifying-glass"}),e[6]||(e[6]=m(" Cari Data "))])])])]),t("div",ee,[t("table",te,[e[8]||(e[8]=t("thead",null,[t("tr",null,[t("th",null,"Kabupaten/Kota"),t("th",null,"Status")])],-1)),t("tbody",null,[(i(!0),d(h,null,j(n(y).props.regions,(s,g)=>(i(),d("tr",{key:g},[t("td",null,f(s.label),1),t("td",ae,[t("span",{class:I(["badge",k(s.value)])},f(C(s.value)),3)])]))),128))])])])])]),_:1})],64)}}},pe=R(oe,[["__scopeId","data-v-100ad117"]]);export{pe as default};
